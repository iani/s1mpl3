function startDrop(){function t(t){return $(t.target).addClass("dragOver"),t.stopPropagation(),t.preventDefault(),!1}function e(t){return t.originalEvent.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault(),!1}function n(t){return $(t.target).removeClass("dragOver"),t.stopPropagation(),t.preventDefault(),!1}$.fn.dropArea=function(){return this.bind("dragenter",t).bind("dragover",e).bind("dragleave",n),this}}function startInsert(){var t=function(t){if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=t,this.focus();else{if(!this.selectionStart&&"0"!=this.selectionStart)throw new Error("insertAtCaret not supported");var e=this.selectionStart,n=this.selectionEnd,o=this.scrollTop;this.value=[this.value.substring(0,e),t,this.value.substring(n,this.value.length)].join(""),this.focus(),this.selectionStart=e+t.length,this.selectionEnd=e+t.length,this.scrollTop=o}};$.fn.insertAtCaret=function(e){$(this).each(function(){t.call(this,e)})}}!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,o=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,o){var i=t.Event(n);return e.trigger(i,o),i.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(o){var i,r,a,s,l,u,c,d;if(n.fire(o,"ajax:before")){if(s=o.data("cross-domain"),l=s===e?null:s,u=o.data("with-credentials")||null,c=o.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,o.is("form")){i=o.attr("method"),r=o.attr("action"),a=o.serializeArray();var p=o.data("ujs:submit-button");p&&(a.push(p),o.data("ujs:submit-button",null))}else o.is(n.inputChangeSelector)?(i=o.data("method"),r=o.data("url"),a=o.serialize(),o.data("params")&&(a=a+"&"+o.data("params"))):o.is(n.buttonClickSelector)?(i=o.data("method")||"get",r=o.data("url"),a=o.serialize(),o.data("params")&&(a=a+"&"+o.data("params"))):(i=o.data("method"),r=n.href(o),a=o.data("params")||null);d={type:i||"GET",data:a,dataType:c,beforeSend:function(t,i){return i.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(o,"ajax:beforeSend",[t,i])},success:function(t,e,n){o.trigger("ajax:success",[t,e,n])},complete:function(t,e){o.trigger("ajax:complete",[t,e])},error:function(t,e,n){o.trigger("ajax:error",[t,e,n])},crossDomain:l},u&&(d.xhrFields={withCredentials:u}),r&&(d.url=r);var f=n.ajax(d);return o.trigger("ajax:send",f),f}return!1},handleMethod:function(o){var i=n.href(o),r=o.data("method"),a=o.attr("target"),s=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+i+'"></form>'),c='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&s!==e&&(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&u.attr("target",a),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,o=t.data("confirm"),i=!1;return o?(n.fire(t,"confirm")&&(i=n.confirm(o),e=n.fire(t,"confirm:complete",[i])),i&&e):!0},blankInputs:function(e,n,o){var i,r,a=t(),s=n||"input,textarea",l=e.find(s);return l.each(function(){if(i=t(this),r=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!r==!o){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;a=a.add(i)}}),a.length?a:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(o,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,o){t.crossDomain||n.CSRFProtection(o)}),o.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),o.delegate(n.linkClickSelector,"click.rails",function(o){var i=t(this),r=i.data("method"),a=i.data("params");if(!n.allowAction(i))return n.stopEverything(o);if(i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==e){if(!(!o.metaKey&&!o.ctrlKey||r&&"GET"!==r||a))return!0;var s=n.handleRemote(i);return s===!1?n.enableElement(i):s.error(function(){n.enableElement(i)}),!1}return i.data("method")?(n.handleMethod(i),!1):void 0}),o.delegate(n.buttonClickSelector,"click.rails",function(e){var o=t(this);return n.allowAction(o)?(n.handleRemote(o),!1):n.stopEverything(e)}),o.delegate(n.inputChangeSelector,"change.rails",function(e){var o=t(this);return n.allowAction(o)?(n.handleRemote(o),!1):n.stopEverything(e)}),o.delegate(n.formSubmitSelector,"submit.rails",function(o){var i=t(this),r=i.data("remote")!==e,a=n.blankInputs(i,n.requiredInputSelector),s=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(o);if(a&&i.attr("novalidate")==e&&n.fire(i,"ajax:aborted:required",[a]))return n.stopEverything(o);if(r){if(s){setTimeout(function(){n.disableFormElements(i)},13);var l=n.fire(i,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(i)},13),l}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),o.delegate(n.formInputClickSelector,"click.rails",function(e){var o=t(this);if(!n.allowAction(o))return n.stopEverything(e);var i=o.attr("name"),r=i?{name:i,value:o.val()}:null;o.closest("form").data("ujs:submit-button",r)}),o.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),o.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)}))}(jQuery),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,o=document.createElement(t||"div");for(n in e)o[n]=e[n];return o}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,o){var i=["opacity",e,~~(100*t),n,o].join("-"),r=.01+100*(n/o),a=Math.max(1-(1-t)/e*(100-r),t),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return d[i]||(p.insertRule("@"+l+"keyframes "+i+"{"+"0%{opacity:"+a+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+a+"}"+"}",p.cssRules.length),d[i]=1),i}function o(t,e){var n,o,i=t.style;if(void 0!==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<c.length;o++)if(n=c[o]+e,void 0!==i[n])return n}function i(t,e){for(var n in e)t.style[o(t,n)||n]=e[n];return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)void 0===t[o]&&(t[o]=n[o])}return t}function a(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function s(t){return"undefined"==typeof this?new s(t):(this.opts=r(t||{},s.defaults,f),void 0)}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}p.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,o){function r(){return i(n("group",{coordsize:u+" "+u,coordorigin:-l+" "+-l}),{width:u,height:u})}function a(t,a,s){e(d,e(i(r(),{rotation:360/o.lines*t+"deg",left:~~a}),e(i(n("roundrect",{arcsize:o.corners}),{width:l,height:o.width,left:o.radius,top:-o.width>>1,filter:s}),n("fill",{color:o.color,opacity:o.opacity}),n("stroke",{opacity:0}))))}var s,l=o.length+o.width,u=2*l,c=2*-(o.width+o.length)+"px",d=i(r(),{position:"absolute",top:c,left:c});if(o.shadow)for(s=1;s<=o.lines;s++)a(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=o.lines;s++)a(s);return e(t,d)},s.prototype.opacity=function(t,e,n,o){var i=t.firstChild;o=o.shadow&&o.lines||0,i&&e+o<i.childNodes.length&&(i=i.childNodes[e+o],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var u,c=["webkit","Moz","ms","O"],d={},p=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};s.defaults={},r(s.prototype,{spin:function(e){this.stop();var n,o,r=this,s=r.opts,l=r.el=i(t(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),c=s.radius+s.length+s.width;if(e&&(e.insertBefore(l,e.firstChild||null),o=a(e),n=a(l),i(l,{left:("auto"==s.left?o.x-n.x+(e.offsetWidth>>1):parseInt(s.left,10)+c)+"px",top:("auto"==s.top?o.y-n.y+(e.offsetHeight>>1):parseInt(s.top,10)+c)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!u){var d,p=0,f=(s.lines-1)*(1-s.direction)/2,h=s.fps,m=h/s.speed,v=(1-s.opacity)/(m*s.trail/100),w=m/s.lines;!function g(){p++;for(var t=0;t<s.lines;t++)d=Math.max(1-(p+(s.lines-t)*w)%m*v,s.opacity),r.opacity(l,t*s.direction+f,d,s);r.timeout=r.el&&setTimeout(g,~~(1e3/h))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(o,r){function a(e,n){return i(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px"+",0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var s,l=0,c=(r.lines-1)*(1-r.direction)/2;l<r.lines;l++)s=i(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:u&&n(r.opacity,r.trail,c+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(s,i(a("#000","0 0 4px #000"),{top:"2px"})),e(o,e(s,a(r.color,"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var h=i(t("group"),{behavior:"url(#default#VML)"});return!o(h,"transform")&&h.adj?l():u=o(h,"animation"),s}),function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],t);else{if(!window.Spinner)throw new Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(t,e){t.fn.spin=function(n,o){return this.each(function(){var i=t(this),r=i.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=t.extend({color:o||i.css("color")},t.fn.spin.presets[n]||n),r.spinner=new e(n).spin(this))})},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),$.fn.spin.presets.loader={lines:10,length:4,width:3,radius:7,corners:1,rotate:0,direction:1,speed:1.8,trail:56,shadow:!1,hwaccel:!0,className:"spinner",top:"auto",left:"auto"},function(t){var e,n={className:"autosizejs",append:"",callback:!1,resizeDelay:10},o='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],r=t(o).data("autosize",!0)[0];r.style.lineHeight="99px","99px"===t(r).css("lineHeight")&&i.push("lineHeight"),r.style.lineHeight="",t.fn.autosize=function(o){return this.length?(o=t.extend({},n,o||{}),r.parentNode!==document.body&&t(document.body).append(r),this.each(function(){function n(){var e,n;"getComputedStyle"in window?(e=window.getComputedStyle(p,null),n=p.getBoundingClientRect().width,t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,o){n-=parseInt(e[o],10)}),r.style.width=n+"px"):r.style.width=Math.max(f.width(),0)+"px"}function a(){var a={};if(e=p,r.className=o.className,u=parseInt(f.css("maxHeight"),10),t.each(i,function(t,e){a[e]=f.css(e)}),t(r).css(a),n(),window.chrome){var s=p.style.width;p.style.width="0px",p.offsetWidth,p.style.width=s}}function s(){var t,i;e!==p?a():n(),r.value=p.value+o.append,r.style.overflowY=p.style.overflowY,i=parseInt(p.style.height,10),r.scrollTop=0,r.scrollTop=9e4,t=r.scrollTop,u&&t>u?(p.style.overflowY="scroll",t=u):(p.style.overflowY="hidden",c>t&&(t=c)),t+=h,i!==t&&(p.style.height=t+"px",m&&o.callback.call(p,p))}function l(){clearTimeout(d),d=setTimeout(function(){var t=f.width();t!==w&&(w=t,s())},parseInt(o.resizeDelay,10))}var u,c,d,p=this,f=t(p),h=0,m=t.isFunction(o.callback),v={height:p.style.height,overflow:p.style.overflow,overflowY:p.style.overflowY,wordWrap:p.style.wordWrap,resize:p.style.resize},w=f.width();f.data("autosize")||(f.data("autosize",!0),("border-box"===f.css("box-sizing")||"border-box"===f.css("-moz-box-sizing")||"border-box"===f.css("-webkit-box-sizing"))&&(h=f.outerHeight()-f.height()),c=Math.max(parseInt(f.css("minHeight"),10)-h||0,f.height()),f.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===f.css("resize")||"vertical"===f.css("resize")?"none":"horizontal"}),"onpropertychange"in p?"oninput"in p?f.on("input.autosize keyup.autosize",s):f.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):f.on("input.autosize",s),o.resizeDelay!==!1&&t(window).on("resize.autosize",l),f.on("autosize.resize",s),f.on("autosize.resizeIncludeStyle",function(){e=null,s()}),f.on("autosize.destroy",function(){e=null,clearTimeout(d),t(window).off("resize",l),f.off("autosize").off(".autosize").css(v).removeData("autosize")}),s())})):this}}(window.jQuery||window.$),function(){window.startForm=function(){var t;return t||(t=null),$("#picker").length>0&&"loaded"!==t&&$.getScript("https://dtu1xr3i3b2a1.cloudfront.net/cargo/colorpicker-64a91e90edfba118c1721fc5fae9c7bb.js").done(function(){return t="loaded",startPicker()}),$("#picker").length>0&&"loaded"===t&&startPicker(),$(".colorpicker").on("click",function(){return $(".pane_input, label, .input").removeClass("active"),$(this).prev(".input").addClass("active").prev("label").addClass("active")}),$(".select select").on("click",function(){return $(".pane_input, label, .input").removeClass("active"),$(this).prev(".select").addClass("active").prev("label").addClass("active")}),$(".select").on("click",function(){return $(".pane_input, label, .input").removeClass("active"),$(this).addClass("active").prev("label").addClass("active")}),$("textarea.autosize").autosize(),$("form.keyable").on("keypress",function(t){return 13===t.keyCode?($(this).submit(),!1):void 0}),$("a.submit_form").on("click",function(){return $(this).closest("form").submit(),!1}),$(".pane_input").on("keypress",function(){return $(this).parent("form").addClass("active")}),$(".pane_input").on("focus",function(){return $(".pane_input, label, .input").removeClass("active"),$(this).parent().next("p.explain").slideDown(),$(this).parent().addClass("active"),$(this).parent().prev("label").addClass("active")}),$(".pane_input").on("blur",function(){return $(".pane_input, label, .input").removeClass("active"),$(this).parent().prev("label").removeClass("active"),$(this).next("p.explain").slideUp()}),$("#delete_post").on("click",function(){return $("#delete_post_link").click(),!1})}}.call(this),function(){window.delay=function(t,e){return setTimeout(e,t)},window.startApplication=function(){var t,e,n,o,i,r;return n||(n=null),r||(r=null),t=function(){return clearTimeout(r),n=setTimeout(function(){return $("body").removeClass("menu_active"),$("#master").removeClass("active"),$(".kudo.side").removeClass("pushover"),$("nav#master").scrollTop(0)},600)},e=function(){return clearTimeout(r),$("body").removeClass("menu_active"),$("#master").removeClass("active"),$(".kudo.side").removeClass("pushover"),$("nav#master").scrollTop(0)},o=function(){return clearTimeout(n),r=setTimeout(function(){return $("body").addClass("menu_active"),$("#master").addClass("active"),$(".kudo.side").addClass("pushover")},300)},i=function(){return clearTimeout(n),$("body").addClass("menu_active"),$("#master").addClass("active"),$(".kudo.side").addClass("pushover")},$("div#touch_close").on("touchend",function(){return e(),!1}),$("div#touch_close").on("click",function(){return e(),!1}),$("#master_indicator, #master_indicator a").on("click",function(){return!1}),$("div#touch_menu").on("touchend",function(){return $("#master").hasClass("active")?e():i(),!1}),$("div#touch_menu").on("click",function(){return $("#master").hasClass("active")?e():i(),!1}),$("#master, div#touch_menu").on("mouseenter",function(){return o()}).on("mouseleave",function(){return t()}),!1}}.call(this),function(){window.startDashboard=function(){return $("#quick_idea textarea.title").on("keypress",function(t){return 13===t.keyCode?($("#quick_idea").submit(),!1):void 0}),$("textarea.pane_input").on("keypress",function(){return $("#quick_idea").addClass("active")}),$("textarea.pane_input").on("click",function(){return $(".pane_input, label").removeClass("active"),$("#quick_idea").next("p.explain").slideDown(),$("#quick_idea").addClass("active")}),$("textarea.pane_input").on("blur",function(){return $("#quick_idea").removeClass("active"),$("textarea.pane_input, div.input").removeClass("active")}),$("#delete_post").on("click",function(){return $("#delete_post_link").click(),!1})}}.call(this),function(){var t;window.startPosts=function(){var e,n,o,i,r,a;return n=!1,o=!1,e=!1,i=0,r=!1,a=0,window.loadstatus=$("#post_published").val(),startDrop(),startInsert(),$("#post_content").on("keyup",function(){return i+=1,150===i&&($(".preview_button").length>0?savePreview(!0):$(".post_form").submit(),i=0,a+=1,3===a)?(updateAutosaveIndicator(),a=0):void 0}),window.permalink=$("#post_permalink").val(),delay(500,function(){return mdown()}),$("#show_preview_version").on("click",function(){var t;return t=$("#preview_content").text(),$("#preview_content").remove(),$(".notify_preview").text('This version has not yet been saved. Click "save" to accept these changes. (Reload the page to revert to the previously saved version.)'),$(".content").text(t),!1}),delay(3e4,function(){return $(".notify_preview").slideUp()}),$(".title").autosize(),$(".content").autosize(),$(".content, .title, .link").on("focus",function(){return mdown()}),$(".content, .title, .link").on("blur",function(){return mdown()}),$(".title").on("focus",function(){return $(".link").show()}),$("a.close_popup").on("click",function(t){return $("#write").removeClass("fade"),$("figure#markdown_help").fadeOut(),t.preventDefault(),!1}),$(".cancel_changes").on("click",function(t){return $("#options").fadeOut(),t.preventDefault(),!1}),$(".save_changes").on("click",function(){return $("#options").hide(),$(".post_form").submit(),!1}),$(".submit_form").on("click",function(){return showLoader(),checkImage(),$(".notify_preview").slideUp()}),$("#preview").on("click",function(){return savePreview()}),$("#markdown").on("click",function(){return $("#write").addClass("fade"),$("#markdown_help").fadeIn(),!1}),$("#show_options").on("click",function(t){return $("#options").fadeIn(),!1}),$("#show_options").on("click",function(){return $("#options").show(),!1}),$("#publish_button").on("click",function(t){var e,n,o,i,r;return r=$("#post_published").val(),i=$("textarea.content").val(),i.length<900&&(e=confirm("This is a very short post. Are you sure you want to publish it already?"),!e)?!1:("0"===r?(n=confirm("Are you sure you want to publish? This will save your current changes and publish your article."),n&&(showLoader(),$("#post_published").val("1"),$("#publish_button").addClass("published").html("Published"),$(".post_form").submit())):(o=confirm("Are you sure? This will save your current changes and unpublish your article."),o&&(showLoader(),$("#post_published").val("0"),$("#publish_button").removeClass("published").html("Publish"),$(".post_form").submit())),t.preventDefault,!1)}),$("#publish_button").on("mouseover",function(){var t;return t=$("#post_published").val(),"0"===t?$("#publish_button").html("Publish now?"):($(this).removeClass("published"),$("#publish_button").html("Unpublish?"))}).on("mouseout",function(){var t;return t=$("#post_published").val(),"0"===t?$("#publish_button").html("Publish"):($(this).addClass("published"),$("#publish_button").html("Published"))}),$("body").dropArea(),$("body").on("drop",function(e){var n,o,i;for(e.preventDefault(),e=e.originalEvent,n=e.dataTransfer.files,o=0,i=[];o<n.length;)t(n[o]),i.push(o++);return i}),$("body").on("dragenter dragover",function(t){return clearTimeout(n),$("body").addClass("dragging"),t.preventDefault()}),$("body").on("dragleave dragexit drop",function(t){return clearTimeout(n),n=setTimeout(function(){return $("body").removeClass("dragging")},100),t.preventDefault()}),$("#drop_zone").on("dragenter dragover",function(t){return clearTimeout(o),$(this).addClass("hovering"),t.preventDefault()}),$("#drop_zone").on("dragleave dragexit drop",function(t){return clearTimeout(o),o=setTimeout(function(){return $("#drop_zone").removeClass("hovering")},100),t.preventDefault()}),$("#drop_zone").bind("drop",function(t){var e,n,o;for(t.preventDefault(),t=t.originalEvent,e=t.dataTransfer.files,n=0,o=[];n<e.length;)/image/.test(e[n].type),o.push(n++);return o})},window.savePreview=function(t){var e,n,o,i,r,a;return null==t&&(t=!1),t||showLoader(),n=new FormData,a=$("textarea#post_title").val(),o=$("input#post_link").val(),e=$("textarea#post_content").val(),n.append("preview[title]",a),n.append("preview[link]",o),n.append("preview[content]",e),i=$("#post_extid").html(),r="/previews/"+i,$.ajax({url:r,data:n,cache:!1,contentType:!1,processData:!1,type:"PUT"}).error(function(){return alert("There was an error saving the preview."),saveError(),!1}).success(function(){})},window.mdown=function(){return $("#markdown").css({top:$(".content").position().top+15+"px"}).fadeIn()},window.saveError=function(){var t;return $("#lights").removeClass().addClass("error"),t=setInterval(function(){return $("#lights").toggle()},250),setTimeout(function(){return clearInterval(t),$("#lights").hide().removeClass("error"),mdown()},1e3),!0},window.saveSuccess=function(){var t;return $("#floater").fadeOut(),$("#lights").removeClass().addClass("success"),t=setInterval(function(){return $("#lights").toggle()},250),setTimeout(function(){return clearInterval(t),$("#lights").hide().removeClass("success"),mdown()},1e3),!0},t=function(t){var e,n,o,i;return showLoader(),o=$("body").scrollTop(),n=$("#post_extid").html(),e=new FormData,e.append("attachment[file_name]",t.name),e.append("attachment[file]",t),e.append("post_extid",n),i="[Uploading...]",$(".content").insertAtCaret(i),$.ajax({url:"/attachments",data:e,cache:!1,contentType:!1,processData:!1,type:"POST"}).error(function(){var t;return saveError(),t=$(".content").val(),t=t.replace(i,""),$(".content").val(t),alert('Your photo was not uploaded. Click "Save," then try again.')}).success(function(e){var n,r,a,s,l;return saveSuccess(),a=t.name.slice(t.name.lastIndexOf(".")).toLowerCase(),n="!["+t.name+"]"+"(https://d23f6h5jpj26xu.cloudfront.net/"+e+"_small"+a+")",s="["+n+"](http://img.svbtle.com/"+e+a+")",l=$(".content").val(),l=l.replace(i,s),$(".content").val(l),r=$("body"),r.animate({scrollTop:o},100)}).complete(function(){return hideLoader()})},window.checkImage=function(){var t,e;return t=$("textarea.content").val(),t.toLowerCase().indexOf("<img ")>=0?($(".notify_image").slideDown(),$(window).scrollTop("0")):$(".notify_image").slideUp(),t.toLowerCase().indexOf('img src="http://')>=0?(e=t.replace('img src="http://','img src="https://'),$("textarea.content").val(e),$(".post_form").submit()):void 0},window.showLoader=function(){return $("#loading").spin("loader","black"),$("div.spinner").css("opacity",1)},window.hideLoader=function(){return $("div.spinner").css("opacity",0),delay(4e3,function(){return $("#loading").spin(!1)})},window.refocusAfterSave=function(){var t;return t=$("#post_content").val(),$("#post_content").focus().val("").val(t)},window.updateAutosaveIndicator=function(){return $("#autosave_indicator_text").css("opacity",1),setTimeout(function(){return $("#autosave_indicator_text").css("opacity",0)},3e3)}}.call(this),function(){var t,e,n,o,i,r,a,s,l,u,c,d,p,f,h,m,v,w,g,b,y,$,x,k,C,_,S,T,z,E,j,D,I,A,P,R,L,q,N,H,F,O,M,Y,U,X={}.hasOwnProperty,B=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};a=10,d=null,j=null,$=null,_={},u=null,q=(null!=(U=document.cookie.match(/request_method=(\w+)/))?U[1].toUpperCase():void 0)||"",Y=null,v=function(t){var e;return O("page:fetch"),e=R(t),null!=Y&&Y.abort(),Y=new XMLHttpRequest,Y.open("GET",e,!0),Y.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),Y.setRequestHeader("X-XHR-Referer",j),Y.onload=function(){var e;return O("page:receive"),(e=z())?(D(t),s.apply(null,h(e)),I(),document.location.hash?document.location.href=document.location.href:H(),O("page:load")):document.location.href=t},Y.onloadend=function(){return Y=null},Y.onabort=function(){return P()},Y.onerror=function(){return document.location.href=t},Y.send()},m=function(t){var e;return r(),e=_[t],null!=Y&&Y.abort(),s(e.title,e.body),E(e),O("page:restore")},r=function(){return _[d.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},l(a)},T=function(t){return null==t&&(t=a),/^[\d]+$/.test(t)?a=parseInt(t):void 0},l=function(t){var e,n;for(e in _)X.call(_,e)&&(n=_[e],e<=d.position-t&&(_[e]=null))},s=function(e,n,o,i){return document.title=e,document.documentElement.replaceChild(n,document.body),null!=o&&t.update(o),L(),i&&p(),d=window.history.state,O("page:change")},p=function(){var t,e,n,o,i,r,a,s,l,u,c,d;for(r=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),a=0,l=r.length;l>a;a++)if(i=r[a],""===(c=i.type)||"text/javascript"===c){for(e=document.createElement("script"),d=i.attributes,s=0,u=d.length;u>s;s++)t=d[s],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(i.innerHTML)),o=i.parentNode,n=i.nextSibling,o.removeChild(i),o.insertBefore(e,n)}},L=function(){var t,e,n,o;for(e=Array.prototype.slice.call(document.body.getElementsByTagName("noscript")),n=0,o=e.length;o>n;n++)t=e[n],t.parentNode.removeChild(t)},D=function(t){return t!==j?window.history.pushState({turbolinks:!0,position:d.position+1},"",t):void 0},I=function(){var t,e;return(t=Y.getResponseHeader("X-XHR-Redirected-To"))?(e=R(t)===t?document.location.hash:"",window.history.replaceState(d,"",t+e)):void 0},P=function(){return window.history.replaceState({turbolinks:!0,position:Date.now()},"",document.location.href)},A=function(){return d=window.history.state},E=function(t){return window.scrollTo(t.positionX,t.positionY)},H=function(){return window.scrollTo(0,0)},R=function(t){var e;return e=t,null==t.href&&(e=document.createElement("A"),e.href=t),e.href.replace(e.hash,"")},O=function(t){var e;return e=document.createEvent("Events"),e.initEvent(t,!0,!0),document.dispatchEvent(e)},S=function(){return!O("page:before-change")},z=function(){var t,e,n,o,i,r;return e=function(){var t;return 400<=(t=Y.status)&&600>t},r=function(){return Y.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},o=function(t){var e,n,o,i,r;for(i=t.head.childNodes,r=[],n=0,o=i.length;o>n;n++)e=i[n],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&r.push(e.src||e.href);return r},t=function(t){var e;return $||($=o(document)),e=o(t),e.length!==$.length||i(e,$).length!==$.length},i=function(t,e){var n,o,i,r,a;for(t.length>e.length&&(r=[e,t],t=r[0],e=r[1]),a=[],o=0,i=t.length;i>o;o++)n=t[o],B.call(e,n)>=0&&a.push(n);return a},!e()&&r()&&(n=u(Y.responseText),n&&!t(n))?n:void 0},h=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,e.body,t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e?"function"==typeof e.getAttribute?e.getAttribute("content"):void 0:void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},n=function(){var t,e,n,o,i,r;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},n=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return i=e("<html><body><p>test"),e}catch(a){return o=a,i=t("<html><body><p>test"),t}finally{if(1!==(null!=i?null!=(r=i.body)?r.childNodes.length:void 0:void 0))return n}},y=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",w,!1),document.addEventListener("click",w,!1))},w=function(t){var e;return t.defaultPrevented||(e=f(t),"A"!==e.nodeName||g(t,e))?void 0:(S()||M(e.href),t.preventDefault())},f=function(t){var e;for(e=t.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return e},c=function(t){return location.protocol!==t.protocol||location.host!==t.host},e=function(t){return(t.hash&&R(t))===R(location)||t.href===location.href+"#"},k=function(t){var e;return e=R(t),e.match(/\.[a-z]+(\?.*)?$/g)&&!e.match(/\.html?(\?.*)?$/g)},x=function(t){for(var e;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},F=function(t){return 0!==t.target.length},C=function(t){return t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},g=function(t,n){return c(n)||e(n)||k(n)||x(n)||F(n)||C(t)},b=function(){return P(),A(),u=n(),document.addEventListener("click",y,!0),window.addEventListener("popstate",function(t){var e;return e=t.state,(null!=e?e.turbolinks:void 0)?_[e.position]?m(e.position):M(t.target.location.href):void 0},!1)},i=window.history&&window.history.pushState&&window.history.replaceState&&void 0!==window.history.state,o=!navigator.userAgent.match(/CriOS\//),N="GET"===q||""===q,i&&o&&N?(M=function(t){return j=document.location.href,r(),v(t)},b()):M=function(t){return document.location.href=t},this.Turbolinks={visit:M,pagesCached:T}}.call(this),function(){window.analytics=function(){var t;return t=window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search,ga("send","pageview",{page:window.location.pathname,title:window.document.title,location:t}),window.pSUPERFLY?window.pSUPERFLY.virtualPage(window.location.pathname,window.document.title):void 0},window.rebind=function(){return startApplication(),$("form").length>0&&startForm(),$("body").hasClass("users")&&startUsers(),$("#quick_idea").length>0&&startDashboard(),$("#write").length>0?startPosts():void 0},$(function(){return rebind()}),$(document).on("page:fetch",function(){return $("#loading").spin("loader","gray"),$("div.spinner").css("opacity",1)}),$(document).on("page:change",function(){return rebind(),analytics(),$("div.spinner").css("opacity",0),$("#loading").spin(!1)
})}.call(this);
